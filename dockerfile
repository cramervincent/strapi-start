FROM strapi/base:latest
#FROM node:16

ENV HOST 0.0.0.0
ENV PORT 1337
ENV NODE_ENV production

ENV APP_KEYS eA+5j0nF/w2uPWNaefi+Ww,Djqb9agQKsfriOorWM++ow,lN+O8aKII1YxCBTMxKILPA,mR84a81GCfiCWJae05TNGw
ENV API_TOKEN_SALT=/JZVNav2lbnXC9QLHLh6fQ
ENV ADMIN_JWT_SECRET=dIvlhs+pmbUn9fKovvWSCw
ENV JWT_SECRET=M41WFF13Bfb6opxHfizn4g

ENV DATABASE_HOST cl9bg8krq002bpgbipyzbh0fj
ENV DATABASE_PORT 3306
ENV DATABASE_NAME cl9bg8kro000obipg49yjdzo9
ENV DATABASE_USERNAME cl9bg8kro000nbipg5y5get47
ENV DATABASE_PASSWORD 5xOIlAHJD9qK4sa90B4Ck5T1
ENV DATABASE_SSL false

WORKDIR /usr/src/app

COPY ./package.json ./
COPY ./yarn.lock ./

RUN yarn install

COPY . ./

RUN yarn build

EXPOSE 1337

CMD ["yarn", "start"]